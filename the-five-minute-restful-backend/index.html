<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="pingback" href="/xmlrpc.php">
	<!--[if lt IE 9]><script src="/wp-content/themes/wpex-tetris/js/html5.js"></script><![endif]-->
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<title>Five-Minute RESTful Backend &#8211; Stranded City</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="Stranded City &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Stranded City &raquo; Comments Feed" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Stranded City &raquo; Five-Minute RESTful Backend Comments Feed" href="/the-five-minute-restful-backend/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='style-css'  href='/wp-content/themes/wpex-tetris/style.css?ver=4.8' type='text/css' media='all' />
<link rel='stylesheet' id='wpex-responsive-css'  href='/wp-content/themes/wpex-tetris/css/responsive.css?ver=4.8' type='text/css' media='all' />
<link rel='stylesheet' id='prettyPhoto-css'  href='/wp-content/themes/wpex-tetris/css/prettyPhoto.css?ver=4.8' type='text/css' media='all' />
<link rel='stylesheet' id='opensans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A400italic%2C600italic%2C700italic%2C400%2C300%2C600%2C700&#038;subset=latin%2Ccyrillic-ext%2Ccyrillic%2Cgreek-ext%2Cgreek%2Cvietnamese%2Clatin-ext&#038;ver=4.8' type='text/css' media='all' />
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Maker Universe in ThreeJS' href='/maker-universe-in-threejs/' />
<meta name="generator" content="WordPress 4.8" />
<link rel="canonical" href="/the-five-minute-restful-backend/" />
<link rel='shortlink' href='/?p=20' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fthe-five-minute-restful-backend%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fthe-five-minute-restful-backend%2F&#038;format=xml" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="post-template-default single single-post postid-20 single-format-standard">

<div id="wrap" class="clearfix">

	<div id="header-wrap" class="clearfix">
		<div id="pre-header" class="clearfix">
			<ul id="header-social" class="clearfix">
							</ul><!-- #header-social -->
		</div><!-- #pre-header -->

		<header id="header" class="clearfix">
			<div id="logo" class="clearfix">
									<div id="text-logo"><a href="/" title="Stranded City" rel="home">Stranded City</a></div>
							</div><!-- /logo -->
			<nav id="navigation" class="clearfix">
				<div class="menu-main-nav-container"><ul id="menu-main-nav" class="sf-menu"><li id="menu-item-8" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-8"><a title="Stranded City Home" href="/">Home</a></li>
<li id="menu-item-9" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-9"><a title="About" href="/about/">Strands</a></li>
</ul></div>			</nav><!-- #navigation -->
		</header><!-- #header -->
	</div><!-- #header-wrap -->
	
	<div id="main-content" class="clearfix">
	
		
	
	<div id="post-thumbnail"></div>


	<div id="single-post-content" class="sidebar-bg container clearfix">
		
		<div id="post" class="clearfix">

							<header id="post-header">
					<h1>Five-Minute RESTful Backend</h1>
					<ul class="meta clearfix">
						<li><strong>Posted on:</strong> June 22, 2014</li>
						<li><strong>Under:</strong> <a href="/category/snippets/" rel="category tag">Snippets</a></li>
						<li><strong>By:</strong> <a href="/author/pseaton/" title="Posts by StrandedCity" rel="author">StrandedCity</a></li>   
											</ul><!-- .meta -->
				</header><!-- #post-header -->
			
			<article class="entry clearfix fitvids post-20 post type-post status-publish format-standard hentry category-snippets tag-mongodb tag-php">
				<div class="inner-post">
					<p>Need to persist some data, quick and dirty, for a prototype? If you&#8217;re up for ignoring security and performance considerations, I definitely recommend a MongoDB + PHP backend. You can get the whole thing running in five minutes, and you&#8217;ll be free to play around with the JavaScript. That&#8217;s what you were after from the beginning, right?</p>
<p>1. Sign up for a free MongoLab account, then set up a database and collection. They have a great RESTful API that&#8217;ll prevent you from having to set up any actual Mongo drivers. This makes it easy if you&#8217;re on a shared host.</p>
<p>2. Include a little PHP script like this one. This script will handle both GET and POST requests. For GET requests it will look up a document (or documents) in a hard-coded database and collection based on a matching &#8220;url&#8221; key, supplied through the query string. For POST requests, it posts a single sample value called &#8220;value&#8221; into the same database and collection.</p>
<pre class="brush: php; title: ; notranslate" title="">
&lt;?php
// Get this at your MongoLab.com user page
$MONGOLAB_API_KEY = '(Your Key Here)';
$DB = '(database name)';
$COLLECTION = '(collection name)';
$url = &quot;https://api.mongolab.com/api/1/databases/$DB/collections/$COLLECTION?apiKey=$MONGOLAB_API_KEY&quot;;

$method = $_SERVER['REQUEST_METHOD'];

switch ($method) {
    case 'POST':
        request_post();
        break;
    case 'GET':
        request_get();
        break;
}

function request_get()
{
    // As an example, we'll pass the parameter supplied by the user straight to the Mongo Query. This is not secure!
    header('Content-Type: application/json');
    global $url;
    $url = $url .&quot;&amp;q=&quot;. urlencode ( '{&quot;url&quot;: &quot;'.$_GET['url'].'&quot;}' );

    try {

      $ch = curl_init();

      curl_setopt($ch, CURLOPT_URL, $url);
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

      $response = curl_exec($ch);
      $error = curl_error($ch);
      $response_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
      curl_close($ch);

    } catch (Exception $e) {
      echo &quot;FAIL&quot;;
    }
}

function request_post()
{
    global $url;

    // Post some user-supplied stuff to the database. Again, you'll want to verify the data and add security restrictions here!
    $value = preg_replace(&quot;/[^A-Za-z0-9\-]/&quot;, '', $_POST['value']);

    $data = json_encode(
      array(
        &quot;value&quot; =&gt; $value
      )
    );

    try {
      $ch = curl_init();

      curl_setopt($ch, CURLOPT_URL, $url);
      curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_POST, 1);
      curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
      curl_setopt($ch, CURLOPT_HTTPHEADER, array(
          'Content-Type: application/json',
          'Content-Length: ' . strlen($data),
          )
      );

      $response = curl_exec($ch);
      $error = curl_error($ch);
      $response_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
      curl_close($ch);

      echo &quot;SAVED&quot;;
    } catch (Exception $e) {
      echo &quot;FAIL&quot;;
    }
}
?&gt;
</pre>
<p>3. Start storing and retrieving your data!</p>
									</div><!-- .inner-post -->
			</article><!-- .entry -->

			
			<div id="post-tags" class="clearfix"><a href="/tag/mongodb/" rel="tag">MongoDB</a><a href="/tag/php/" rel="tag">PHP</a></div>
							<div id="single-author" class="clearfix">
					<h4 class="heading"><span><a href="/author/pseaton/" title="Posts by StrandedCity" rel="author">StrandedCity</a></span></h4>
					<div id="author-image">
					   <a href="/author/pseaton/"><img alt='' src='http://2.gravatar.com/avatar/86697ae477220ae7e85748f4b69fceb5?s=45&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/86697ae477220ae7e85748f4b69fceb5?s=90&amp;d=mm&amp;r=g 2x' class='avatar avatar-45 photo' height='45' width='45' /></a>
					</div><!-- #author-image -->
					<div id="author-bio">
						<p></p>
					</div><!-- #author-bio -->
				</div><!-- #single-author -->
			
			 <div id="commentsbox" class="boxframe">
	<div id="comments" class="comments-area clearfix">
									</div><!-- #comments -->
</div><!-- #commentsbox -->
		</div><!-- post -->
		
		
<aside id="sidebar" class="clearfix">
	<div class="sidebar-box widget_search clearfix">
<form method="get" id="searchbar" action="/"><input type="search" name="s" value="Type and hit enter to search" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"></form></div>		<div class="sidebar-box widget_recent_entries clearfix">		<h4><span>Recent Posts</span></h4>		<ul>
					<li>
				<a href="/the-five-minute-restful-backend/">Five-Minute RESTful Backend</a>
							<span class="post-date">June 22, 2014</span>
						</li>
					<li>
				<a href="/maker-universe-in-threejs/">Maker Universe in ThreeJS</a>
							<span class="post-date">June 22, 2014</span>
						</li>
					<li>
				<a href="/instruction-drawings/">Instruction Drawings</a>
							<span class="post-date">June 11, 2014</span>
						</li>
				</ul>
		</div>		<div class="sidebar-box widget_categories clearfix"><h4><span>Categories</span></h4><label class="screen-reader-text" for="cat">Categories</label><select  name='cat' id='cat' class='postform' >
	<option value='-1'>Select Category</option>
	<option class="level-0" value="3">Projects&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="15">Snippets&nbsp;&nbsp;(1)</option>
</select>

<script type='text/javascript'>
/* <![CDATA[ */
(function() {
	var dropdown = document.getElementById( "cat" );
	function onCatChange() {
		if ( dropdown.options[ dropdown.selectedIndex ].value > 0 ) {
			location.href = "/?cat=" + dropdown.options[ dropdown.selectedIndex ].value;
		}
	}
	dropdown.onchange = onCatChange;
})();
/* ]]> */
</script>

</div></aside><!-- #sidebar -->		
	</div><!-- #single-post-content -->



	<div class="clear"></div>

</div><!-- /main-content -->

	<div id="footer-wrap">
		<footer id="footer">
			<div id="footer-widgets" class="clearfix">
				<div class="footer-box">
									</div><!-- /footer-box -->
				<div class="footer-box">
									</div><!-- /footer-box -->
				<div class="footer-box remove-margin">
									</div><!-- /footer-box -->
			</div><!-- /footer-widgets -->
		</footer><!-- /footer -->
	</div><!-- /footer-wrap -->

	<div id="copyright">
		© 2017 Phil Seaton / Stranded City	</div>

</div><!-- /wrap -->

<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/superfish.min.js?ver=1.7.8'></script>
<script type='text/javascript' src='/wp-includes/js/hoverIntent.min.js?ver=1.8.1'></script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/jquery.prettyPhoto.js?ver=3.1.6'></script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/jquery.flexslider.js?ver=2.6.0'></script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/jquery.fitvids.js?ver=1.1'></script>
<script type='text/javascript' src='/wp-includes/js/imagesloaded.min.js?ver=3.2.0'></script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/jquery.isotope.js?ver=2.2.2'></script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/jquery.slicknav.js?ver=2.1.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wpexvars = {"mobileMenuLabel":"Menu"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/themes/wpex-tetris/js/global.js?ver=1.0'></script>
<script type='text/javascript' src='/wp-includes/js/comment-reply.min.js?ver=4.8'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8'></script>

</body>
</html>